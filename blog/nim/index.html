<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Nim | gibbr.org</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="../../style.css" />
  <link rel="shortcut icon" href="/favicon.ico">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<ul class="navbar" id="navbar">
<li>
<a href="/">home</a>
</li>
<li>
<a href="/blog/">blog</a>
</li>
<li>
<a href="/links.html">links</a>
</li>
</ul>
<h1 id="nim"><a href="#nim" class="anchor"
aria-hidden="true">Nim</a></h1>
<p>I recently had the good fortune to attended a talk by Simon Peyton
Jones titled “Immutability changes everything: 40 years of functional
programming” chronologing Simon’s career researching lazy functional
programming languages. At the University of Glasgow he was a major
contributor to haskell, and remains a lead developer of the Glasgow
Haskell Compiler to this day. He’s recently moved from Microsoft
Research Cambridge to work at Epic Games on a new programming language
dubbed ‘<a
href="https://discourse.haskell.org/t/an-epic-future-for-spj/3573">Verse</a>’.
In this talk Simon described how he originally became interested in
Computer Science: through a game called Nim.</p>
<figure>
<img src="dalle2.png" style="width:50.0%" alt="" />
<figcaption aria-hidden="true"><a href="#fn1" class="footnote-ref"
id="fnref1" role="doc-noteref"><sup>1</sup></a></figcaption>
</figure>
<h3 id="playing-the-game"><a href="#playing-the-game" class="anchor"
aria-hidden="true">Playing the game</a></h3>
<p>You and your oponent face a number of stacks of coins on a table. On
your turn, you can take any number greater than 1 coins from exactly one
stack. Whoever takes the last coin wins (playing a <em>normal</em>, as
oppsed to <em>misère game</em>, game).</p>
<p>Let’s take a very simple example with two coins in one pile, and
three in the other.</p>
<p><img src="nim1.svg" style="width:30.0%" /></p>
<p>If you take all of one pile:</p>
<p><img src="nim2.svg" style="width:30.0%" /></p>
<p>Then your opponent can take all but one from the other, leaving you
to lose:</p>
<p><img src="nim3.svg" style="width:30.0%" /></p>
<p>Let’s rethink…</p>
<p>Instead, if you take one from the pile of three to make the piles
equal:</p>
<p><img src="nim4.svg" style="width:30.0%" /></p>
<p>If your opponent takes all of one pile, fortunes are yours! You can
just take all of the remaining pile. But let’s imagine they’re a little
more canny and they only take one from a pile:</p>
<p><img src="nim5.svg" style="width:30.0%" /></p>
<p>It seemed to have worked last time, so let’s repeat our trick of
making the piles equal:</p>
<p><img src="nim5.svg" style="width:30.0%" /></p>
<p>Your opponent will be forced to take one coin:</p>
<p><img src="nim6.svg" style="width:30.0%" /></p>
<p>And then fortunes are yours!</p>
<p><img src="nim7.svg" style="width:30.0%" /></p>
<p>You will be left with two piles, from which you’ll be forced to take
one.</p>
<p>Your opponent will take the last and win the game again.</p>
<p>However, if you take two from the pile initially, the roles will be
revered for this exact scenario and fortunes are yours!</p>
<h3 id="a-recipe-for-success"><a href="#a-recipe-for-success"
class="anchor" aria-hidden="true">A recipe for success</a></h3>
<p>Nim is a solved game for an arbitrary number of stacks with a
<em>binary digital sum</em>. That is, a sum – ignoring carrying – of the
binary values for every stack size. Another word for this operation is
exclusve or (⊕). For stacks A size 5, B size 2, and C size 3, this is
equal to A⊕B⊕C:</p>
<pre>
A⊕B⊕C
= 5<sub>10</sub>⊕2<sub>10</sub>⊕3<sub>10</sub>
= 1012<sub>2</sub>⊕0102<sub>2</sub>⊕0112<sub>2</sub>
=1112<sub>2</sub>⊕0112<sub>2</sub>
=1002<sub>2</sub>
=4<sub>10</sub>
</pre>
<p>The key to nim is to always finish your turn with a num sum of 0,
which is always possible if the nim-sum is not zero before the start of
your turn.</p>
<h3 id="reflections-on-history"><a href="#reflections-on-history"
class="anchor" aria-hidden="true">Reflections on history</a></h3>
<p>I actually</p>
<p>I went to school in Scotland, where as part of Senior Phase 6
Advanced Higher Computing Project</p>
<p>The reason why my ears perked up at the mention of Nim was because
this was the game I chose to implement for my Advanced Higher Computing
Project.</p>
<p>But you only have</p>
<p>S6 AH Computing Proiject</p>
<p>Nim - Honestly don’t remember where I found this game, but I thought
it was interesting.</p>
<p>And once you know the trick, building a perfect AI opponent is
trivial.</p>
<p>Haven’t thought about this in years, apart from adding a repo and
trying and failure to compile it (an interesting exercise in
reproducibility)</p>
<p>Inane requirements - like writing out the entire program in pseuocode
beforehand and using a strict waterful methodology</p>
<p>I had been taught Vb, had friend’s learning Python &amp; JAva, but I
really only knew how to code in the Visual Studio IDE. I had enough
foresight to want to move away from Visual Basic, and C# was a natural
choice due to IDE support and feature parity (same IR)
https://en.wikipedia.org/wiki/Comparison_of_C_Sharp_and_Visual_Basic_.NET</p>
<p>This started my prefered way of learning programming languages: just
start building something and figure things out from there. Normally this
means getting stuck and consulting stack overflow or preferable the
documentation. I view programming as kind of like riding a bike - it’s
all well and good to read a textbook on how to do it but to do it in
reality you need to practive</p>
<p>needless to say some of these were completed</p>
<pre><code>private void AITurn() {
    int nim_sum = 0x0;
    int[] Stacks_binary_values = new int[number_of_stacks];
    for (int i = 0; i &lt; number_of_stacks; i++) {
        Stacks_binary_values[i] = Convert.ToByte(Stacks[i].Text);
        nim_sum = nim_sum ^ Stacks_binary_values[i];stacks binary values
    }
    if (nim_sum == 0x0 || random.NextDouble() &gt; AIdifficulty) {
        int stack_index = random.Next(number_of_stacks);
        Stacks[stack_index].Text = random.Next(int.Parse(Stacks[stack_index].Text)-1).ToString();
        if (Stacks[stack_index].Text == &quot;0&quot;) {
            Stacks[stack_index].Hide();
            Disks[stack_index].Hide();
        }
        current_stack = stack_index + 1;
    } else {
        for (int i = 0; i &lt; number_of_stacks; i++) {
            if ((nim_sum ^ Stacks_binary_values[i]) &lt; Stacks_binary_values[i]) {
                Stacks_binary_values[i] = nim_sum ^ Stacks_binary_values[i];
                Stacks[i].Text = Convert.ToString(Stacks_binary_values[i]);
                if (Stacks[i].Text == &quot;0&quot;) {
                    Stacks[i].Hide();
                    Disks[i].Hide();
                }
                current_stack = i + 1;
                break;
            }
        }
    }
    TurnTaken();
}</code></pre>
<h2 id="computing-education"><a href="#computing-education"
class="anchor" aria-hidden="true">Computing Education</a></h2>
<p>Now what’s the point of this article? What do you want people to take
away?</p>
<section class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>Generated by <a
href="https://openai.com/dall-e-2/">DALL.E 2</a><a href="#fnref1"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</body>
</html>
