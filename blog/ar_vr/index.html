<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Virtual and Augmented Reality | gibbr.org</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="../../style.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <link rel="shortcut icon" href="/favicon.ico">
</head>
<body>
<ul class="navbar" id="navbar">
<li>
<a href="/">home</a>
</li>
<li>
<a href="/blog/">blog</a>
</li>
<li>
<a href="/links.html">links</a>
</li>
</ul>
<h1 id="virtual-and-augmented-reality"><a href="#virtual-and-augmented-reality" class="anchor" aria-hidden="true">Virtual and Augmented Reality</a></h1>
<p>2022-04-18</p>
<p>I’ve been interested in virtual reality (VR) and augmented reality (AR) recently as the use case for the system(s) I’m working on in my MPhil project. This blog post will cover my development experience in porting my <a href="../cubes/">cubes</a> game to both VR and AR, and give a small demo for the latter.</p>
<p>Microsoft Windows was used for easy of development with <a href="https://unity.com/">Unity</a>, and as it’s a hard requirement for the AR headset made by Microsoft.</p>
<h2 id="vr"><a href="#vr" class="anchor" aria-hidden="true">VR</a></h2>
<p><img src="./quest2.jpg" style="width:50.0%" /></p>
<p>The <a href="https://www.oculus.com/quest-2/">Oculus Quest 2</a> from Meta (formally Facebook) is a VR headset running an Android derivative. This means you can do cool stuff like run <a href="https://www.reddit.com/r/cyberDeck/comments/fc5sfr/oculus_quest_termux_selfcontained_hmd_cyberdeck/">Termux</a> on it (an Android terminal emulator and unvirtualised Linux environment). It’s nowhere near as good for productivity as something like what <a href="https://simulavr.com/">SimulaVR</a> are doing, which features a neat <a href="https://github.com/SimulaVR/Simula">Haskell Wayland compositor</a>.</p>
<p>With access to the Oculus Quest 2 , I was first able to explore the world of free games on the <a href="https://www.oculus.com/experiences/quest/">Oculus store</a>.</p>
<p>I quickly found it outlived it’s novelty however, and as I’ve always enjoyed making things more than using then I moved on to try and develop something for the headset. Instead of creating something brand new, I decided to try and port my existing cubes game created back at the end of my final undergrad year.</p>
<p>Development for the Quest is quite a polished experience, although I may only be saying this in hindsight after developing for the Hololens. Bar some linkrot, the <a href="https://developer.oculus.com/documentation/unity/unity-gs-overview/">documentation</a> covers setting up a development environment and creating an app. The basic gist is install Unity with some Android and <a href="https://docs.unity3d.com/Manual/XRPluginArchitecture.html">VR support</a> plugins. You also need either developer mode to sideload apps, a compatible USB-C cable, or <a href="https://support.oculus.com/airlink/">Oculus Air Link</a> with WiFi that plays nice. I opted for the latter. With some modifications to the <a href="https://github.com/RyanGibb/cubes/compare/vr#diff-4fa152eddce941e5e1dba548d9551e10a7055f8cc4ceabf8085efce55054a12eL149">scene camera</a> and the <a href="https://github.com/RyanGibb/cubes/compare/vr#diff-6559439996a27afac6044cabe35d54d1d69bed7fc62874eb3d86bfaf3370d1a3R1">movement script</a> it was good to go.</p>
<p>UX for VR is a whole different ball game - but it didn’t give nearly as much nausea as it might have.</p>
<p>Many thanks to <a href="https://pjohnsonportfolio.wordpress.com/">Paul Johnson</a> for lending me this device.</p>
<p>See the source code <a href="https://github.com/RyanGibb/cubes/tree/vr">here</a>.</p>
<h2 id="ar"><a href="#ar" class="anchor" aria-hidden="true">AR</a></h2>
<p><img src="./hololens2.jpg" style="width:50.0%" /></p>
<p>The <a href="https://www.microsoft.com/en-us/hololens/">Microsoft Hololens 2</a> from Microsoft is an AR headset running the “Windows Holographic” OS - essentially a 64bit ARM version of windows with a spatial window manager. This was a real pain as it turns out it doesn’t support Win32 applications - which killed my <a href="../ar_terminal">dreams</a> of running the <a href="https://github.com/microsoft/terminal">Windows Terminal</a> on it. See <a href="https://github.com/microsoft/terminal/issues/12219">this</a> GitHub issue for more info</p>
<p>Aside from being hostile to hacking, the development experience was quite horrible. Recalling from memory, the development environment setup steps were something like:</p>
<ul>
<li>Install Unity Hub</li>
<li>Install Unity Editor through Unity Hub</li>
<li>Install Windows 10 SDK 10.0.18362.0 or later</li>
<li>Install Microsoft Mixed Reality Toolkit
<ul>
<li>Purportedly requires <a href="https://dotnet.microsoft.com/en-us/download/dotnet/5.0">.NET 5.0 runtime</a>, but actuality requires <a href="https://dotnet.microsoft.com/en-us/download/dotnet/thank-you/runtime-desktop-5.0.13-windows-x64-installer">.NET Desktop Runtime 5.0</a></li>
</ul></li>
<li>Visual Studio requires a restart</li>
<li>Install workloads:
<ul>
<li>’Desktop development with C++‘</li>
<li>’Universal Windows Platform (UWP) development‘</li>
<li>’Game development with Unity‘</li>
<li>C++ (v142) Universal Windows Platform tools (required when using Unity)</li>
</ul></li>
<li>Compile the Unity project to a Visual Studio project</li>
<li>Change visual studio startup project to Cubes from Il2CppOutputProject</li>
<li>And run on the Hololens from there (which also installs the App)</li>
</ul>
<p>Having started to use the nix package manager recently this is basically exactly the dependency and reproducibility headache I’m trying to avoid.</p>
<p>To their credit, the Visual Studio remote machine running over the local network worked very well once it was setup: enabling developer mode, pairing the device, and obtaining the IP address. The <a href="https://docs.microsoft.com/en-us/windows/mixed-reality/develop/advanced-concepts/device-portal-api-reference">device portal API</a> also proved very useful in watching a real time feed of user’s POV.</p>
<p>This <a href="https://docs.microsoft.com/en-us/learn/modules/learn-mrtk-tutorials/">article</a> proved the most useful in setting up the development environment.</p>
<p>The modifications to the project were more significant than for the Quest 2 but mainly boiled down to getting things working the way the Microsoft Mixed Reality Toolkit (MRTK) wanted.</p>
<p>Many thanks to <a href="https://anil.recoil.org/">Anil Madhavapeddy</a> for lending me this device.</p>
<p>See the source code <a href="https://github.com/RyanGibb/cubes/tree/ar">here</a>.</p>
<h2 id="demo"><a href="#demo" class="anchor" aria-hidden="true">Demo</a></h2>
<p>See a demo of this game on the Hololens 2 with some willing participants below.</p>
<iframe width="100%" src="https://www.youtube-nocookie.com/embed/CLPvYf_EE6k" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="display: block; margin: 0 auto; aspect-ratio: 16/9;">
</iframe>
</body>
</html>
